<html>
<head>
<title>再現弾幕を作るには</title>
<style type="text/css">
<!--
.main{text-align : left;
      font-family : sans-serif;
      font-size : 14pt;
      line-height : 150%;}
.yukari{text-align : left;
        font-family : sans-serif;
        font-size : 14pt;
        line-height : 150%;
        color : #ff00ff}
-->
</style>
</head>
<body topmargin="30" leftmargin="10" rightmargin="80"
      bgcolor="#ccccff" text="black" link="blue" vlink="blue" alink="red">
<p class="main">
閑話休題　再現弾幕を作るには<br>
<br>
</p>

<table cellspacing="1" cellpadding="10" border="0">

<tr align="left">
<td width="120"><img src="./../icon/yukari03.png" align="left" width="120" height="120"></td>
<td><p class="yukari">
お久しぶりね。<br>
本編ではマイクロスレッドの講座が終わって、<br>
いよいよ新たな一歩を踏み出すといったところかしら。<br>
これから様々な表現ができるようになるからね。
</p></td>
</tr>
<tr align="left">
<td width="120"><img src="./../icon/yukari04.png" align="left" width="120" height="120"></td>
<td><p class="yukari">
<br><br><br>
で、今回のお話は弾幕の再現について。<br>
自分で好きな弾幕が作れると聞いては、<br>
１回くらいは弾幕の再現に思いを馳せるものではないかしら。<br>
原作の東方projectで出るスペルカードや、他のシューティングの隠しボスが<br>
使う弾幕を再現したいとか･･････<br>
既存のゲームに出てくる弾幕の中には是非作ってみたいと思えるような<br>
美しい弾幕、面白い弾幕、有名な弾幕があるわよね。<br>
それを寸分違わず再現することができたなら･･････<br>
弾幕作成者としてそれ以上の喜びというのもそうはないわ。
</p></td>
</tr>
<tr align="left">
<td width="120"><img src="./../icon/yukari02.png" align="left" width="120" height="120"></td>
<td><p class="yukari">
<br><br><br>
それでも弾幕再現の道はとても大変なのよ。<br>
一見すると似ている程度のレベルでいいなら割と簡単に作れるけれど、<br>
１°単位やフレーム単位の細かい調整までしようとすると、<br>
それはそれは大変な作業になるのよ。<br>
なにせ相手は弾幕。<br>
数百発、数千発の弾を１発残さず再現しようとするからね。<br>
そんな再現弾幕をどうやって作ればいいのか。<br>
それについてここの作者なりの意見を交えて話していこうと思っているわ。
</p></td>
</tr>
<tr align="left">
<td width="120"><img src="./../icon/yukari04.png" align="left" width="120" height="120"></td>
<td><p class="yukari">
<br><br><br><br><br>
まず再現弾幕を作る上で欠かせないのが『動画ファイル』よ。<br>
もちろん、再現したい弾幕を収録している動画ね。<br>
実際に自分がプレイした経験、記憶だけを元に作るなんて問題外。<br>
たとえ１００回その弾幕を経験したとしても、細かな再現はまず無理。<br>
うろ覚えの弾幕でいいならそれで構わないのだけれど、<br>
そうでないならやはり動画は必須よ。<br>
それに再現元として使える動画はできるだけ多い方がいいわ。<br>
動画は大抵の場合通常のプレイ動画であることがほとんど。<br>
ボムを撃ったりミスしたりして弾幕が欠けてしまうこともあるわ。<br>
それに自機の位置によって弾幕の崩れ方が異なるものもあったり、<br>
ランダム要素がある弾幕もあるからね。<br>
だから素材となる動画は多い方がより精度の高い再現ができるわ。
</p></td>
</tr>
<tr align="left">
<td width="120"><img src="./../icon/yukari03.png" align="left" width="120" height="120"></td>
<td><p class="yukari">
<br><br><br><br><br>
そしてもう１つ、動画ファイルを再生するプレイヤーね。<br>
個人的にはGOM PLAYERをお勧めするわ。<br>
利点について挙げると･･････<br>
<br>
１．多くの動画ファイル形式に対応している。<br>
２．プレイリストが使いやすいので、動画ファイルの管理、整頓が楽。<br>
３．コマ送り機能があるため、細部の調査ができる。<br>
４．スロー再生、高速再生が０．２倍〜４．０倍速の範囲で設定できる。<br>
５．時間移動を秒単位で設定できる。<br>
６．３〜５の操作をショートカットキーで行える。 (超重要)<br>
７．無料である。<br>
<br>
と、再現弾幕作りにうってつけのメディアプレイヤーよ。<br>
画質はそこまで良い方ではないらしいけど、気にするレベルではないと思うわ。
</p></td>
</tr>
<tr align="left">
<td width="120"><img src="./../icon/yukari04.png" align="left" width="120" height="120"></td>
<td><p class="yukari">
<br><br><br>
さて、準備が整ったところで次は動画のどこに着目すればいいのかについてね。<br>
特に重要なのは『弾の数』『弾の速さ』『弾の角度』『弾の発射間隔』の４つ。<br>
このパラメータ設定を如何に再現元に近づけるかが勝負よ。<br>
ちょっと具体的な例を出しましょう。<br>
『study012』の全方位弾をサンプルにして話をしましょう。<br>
当たり前だけど、スクリプトを直接見てパラメータを決めるっていうのはナシよ。<br>
パラメータの詳細がわからないという仮定で話すわ。
<br><br>
</p></td>
</tr>
<tr align="left">
<td width="120"><img src="./../icon/yukari02.png" align="left" width="120" height="120"></td>
<td><p class="yukari">
<br><br><br>
まずこの手の弾幕を見て注目すべきは『弾の数』。<br>
弾を全方向に、かつ等間隔に撃っているからこれはどう見ても全方位弾よね。<br>
その全方位弾のway数を数えてみましょう。<br>
一時停止が役立つときね。<br>
数えてみると１６発であることがわかるわね。<br>
つまり全方位弾は16wayであることが判明したわ。<br>
全方位弾のway数は２のｎ乗である場合が多いけれど、実際に数えてみるのが一番確実ね。<br>
もし全方位弾を数えるのが大変な場合は１８０°分だけ数えて２倍にする、<br>
９０°分だけ数えて４倍する方法もあるわ。<br>
けれどその場合は１つ数え間違うと誤差も２倍、４倍になるから気をつけて。
</p></td>
</tr>
<tr align="left">
<td width="120"><img src="./../icon/yukari04.png" align="left" width="120" height="120"></td>
<td><p class="yukari">
<br><br><br><br><br>
そして次に見るべきは『弾の角度』。<br>
弾の発射角度の決定方法は大きく分類して３種類あるわ。<br>
『常に固定』、『自機位置依存』、『ランダム』の３つよ。<br>
中にはこの３つの要素を複合したものもあるわ。<br>
ばら撒き弾は『自機位置依存』と『ランダム』の複合タイプだし、<br>
最初の角度だけ『ランダム』で決めて後は『常に固定』の角速度で撃つ<br>
回転砲台タイプなんてのもあるわよね。<br>
まずは再現したい弾幕がどんなタイプで発射角度を決めているか<br>
おおよそ察することがポイントね。<br>
更に言えば前の『弾の数』と合わせてどんなスクリプトを書けばいいのか<br>
大体頭に浮かぶレベルが再現弾幕作成者として最低限ほしい実力かしら。<br>
それに『自機位置依存』『ランダム』については、複数の動画ファイルを<br>
見比べないとパラメータの設定に苦労するでしょうね。
</p></td>
</tr>
<tr align="left">
<td width="120"><img src="./../icon/yukari03.png" align="left" width="120" height="120"></td>
<td><p class="yukari">
<br><br><br><br><br><br><br><br>
そして『弾の速さ』と『弾の発射間隔』の２つ。<br>
この２つはある種のセットとして見た方が良いと思うわ。<br>
この２つを観察する上で役に立つのがGOM PLAYERの秒単位の時間移動よ。<br>
環境設定で１秒単位で送れるように設定したあと、<br>
１秒前と後の弾の位置から速さと発射間隔を推定するの。<br>
２つの映像を比べて弾の位置がどう変わったか、<br>
弾がどれだけ増えたかを見れば大体設定すべき数値が見えてくるわ。<br>
もし『study012』の弾幕を動画にして１秒送りすると、丁度全方位弾が<br>
１組増えた映像が映ると思うから、弾の発射間隔が６０フレームほどだと<br>
予想することができるわ。<br>
一応コマ送りの機能もあるけれど最初からこれを使うのは気が滅入って<br>
くるでしょうから、どうしてもわからない細かい部分を調べるときだけ<br>
コマ送りを使う方が良いと思うわ。<br>
そうそう、実際のゲームのfpsは６０なのが普通だけれど動画ファイルは<br>
６０fpsとは限らないわ。<br>
弾幕シューティングの動画はファイルのサイズが大きくなりがちだから、<br>
むしろ６０fpsでない場合が多いでしょう。<br>
６０回コマ送りして動画時間が１秒経過するわけではないから注意してね。
</p></td>
</tr>
<tr align="left">
<td width="120"><img src="./../icon/yukari04.png" align="left" width="120" height="120"></td>
<td><p class="yukari">
<br><br><br><br>
基本的な弾幕を再現するときに気をつけるのはこんなところかしらね。<br>
単純な全方位弾でもこれくらい意識しなければならないわ。<br>
これがもっと複雑な弾幕になったら更に大変よ。<br>
複数の種類の弾幕が合わさると、設定しなければならないパラメータはもちろん増えるし、<br>
合わさった弾幕の混ざり方なども本家と比べなくてはならないでしょう。<br>
加速弾やカーブ弾がある場合は通常の弾と違ってパラメータの微調整に<br>
泣かされることになるでしょうね。<br>
弾の数が異常に増えた場合は弾数を数えるだけでも一苦労だし、<br>
細かいパラメータの推定が困難になるでしょう。<br>
さらに動画中のゲームが処理落ちをしてしまったら余計に弾速や発射間隔が<br>
わからなくなってしまうわ。<br>
そういった色々な問題が実際の弾幕再現にはあるの。
</p></td>
</tr>
<tr align="left">
<td width="120"><img src="./../icon/yukari03.png" align="left" width="120" height="120"></td>
<td><p class="yukari">
<br><br>
とまあここの作者なりの意見を書いてみたけれど、どうかしら。<br>
弾幕を再現するってことがどれだけ大変なのかわかってもらえたかしら？<br>
でもだからこそ自分だけの再現弾幕ができたときは嬉しいものよ。<br>
それに弾幕を再現しているときに思わぬギミックが見つかったりしたりね。<br>
もし貴方が弾幕を見ただけで大体どんなスクリプトを書けばいいのか<br>
わかるくらいのレベルになったら是非とも弾幕再現に挑戦してほしいわ。<br>
大変だけれど、オリジナルの弾幕作りとは違った楽しさや経験があるからね。<br>
それじゃ、今回の話はこんなところで。<br>
また次の機会にお会いしましょうね。
</p></td>
</tr>

</table>


</body>
</html>
